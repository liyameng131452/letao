$(function(){
  //禁用进度条的小圆圈
  NProgress.configure({showSpinner:false});
  //发送ajax请求时出现进度条
  $(document).ajaxStart(function(){
    NProgress.start();
  });
  //ajax结束时进度条消失
  $(document).ajaxStop(function(){
    setTimeout(function(){
      NProgress.done();
    },500)
  });
  //二级分类切换功能
  $('.category').click(function(){
    $(this).next().stop().slideToggle();
  });
  //顶部菜单栏显示切换功能
  $('.icon_menu').click(function(){
    $('.lt_aside').toggleClass('hidemenu');
    $('.lt_main').toggleClass('hidemenu');
    $('.lt_topbar').toggleClass('hidemenu');
  });
  //模态框显示与隐藏功能
  $('.icon_logout').click(function(){
    $('#logoutModal').modal('show');
  });
  //退出功能的实现
  $('#logoutBtn').click(function(){
    $.ajax({
      url:'/employee/employeeLogout',
      type:'get',
      dataType:'json',
      success:function(info){
        console.log(info);
        if(info.success){
          location.href="login.html";
        }
      }
    })
  });
  //退出功能的实现
  if(location.href.indexOf('login.html')===-1){
    $.ajax({
      url:'/employee/checkRootLogin',
      data:'get',
      success:function(info){
        if(info.success){
          console.log('登录了');
        }
        if(info.error===400){
          location.href="login.html";
        }
      }
    })
  }
})